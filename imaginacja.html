<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map user Location</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>

     <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>

    <style>
        #map { height: 700px; }
    </style>

</head>

<body>

    <h1>Map User Locations</h1>
    <div id="map"></div>
    
    <p id="result">"dis "</p>
</body>

<script>
    let map = L.map('map'); 
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OpenStreetMap'
    }).addTo(map); 
    var start = L.latLng(52.229676, 21.012229);
    var end = L.latLng(52.406374, 16.925168);
    var bounds = L.latLngBounds(start, end);
    map.fitBounds(bounds);

    var coords= [];

    var last;
    var iterator=0;
    var total_Distance=0;
    var distance;

    console.log(distance);

    var a=0;

    var popup = L.popup();
    function onMapClick(e) 
    {
        popup
            .setLatLng(e.latlng)
            let marker = L.marker(e.latlng).addTo(map);
        coords.push([e.latlng.lat,e.latlng.lng]);
        polyline = L.polyline(coords).addTo(map);

        if (a>-1)
        {
            var pointA = L.latLng(coords[a]);
            var pointB = L.latLng(coords[a+1]);
            distance = pointA.distanceTo(pointB);
            total_Distance+=parseInt(distance)/1000;
            document.getElementById('result').innerHTML = 'Dystans calkowity to: ' + total_Distance + ' kilometrow';
        }
        //Dodac interfejs zmieniania km/metry
        //Dodac timer i zmiany
        a++;
   
    
        
    }
    map.on('click', onMapClick);
    

    
  
</script>


</html>
